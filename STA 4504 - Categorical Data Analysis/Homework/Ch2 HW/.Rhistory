n = sum(... = unlist(x = gunshot_counts, use.names = FALSE))
sum(... = unlist(x = gunshot_counts, use.names = FALSE))
c(gunshot_counts['unintentional'], n - gunshot_counts['unintentional'])
typeof(gunshot_counts['unintentional'])
typeof(gunshot_counts['unintentional'][0])
typeof(gunshot_counts['unintentional'][0])
typeof(as.integer(x = gunshot_counts['unintentional']))
terrorism <- as.integer(x = gunshot_counts['terrorism'])
unintentional <- as.integer(x = gunshot_counts['unintentional']))
unintentional <- as.integer(x = gunshot_counts['unintentional'])
terrorism <- as.integer(x = gunshot_counts['terrorism'])
c(unintentional, n - unintentional])
c(unintentional, n - unintentional)
c(unintentional, n - unintentional),
c(terrorism, n- terrorism)
gunshot_ct <- table(c(unintentional, n - unintentional)
c(terrorism, n- terrorism))
gunshot_ct <- table(
c(unintentional, n - unintentional),
c(terrorism, n- terrorism)
)
gunshot_ct
gunshot_ct <- as.matrix(x =
c(unintentional, n - unintentional),
c(terrorism, n- terrorism)
)
gunshot_ct
prop.test(
c(unintentional, n - unintentional),
c(terrorism, n- terrorism)
)
prop.test(
c(unintentional, n - unintentional),
c(terrorism, n - terrorism)
)
prop.test(c(189, 104), c(11034, 11037), conf.level=0.95, correct=FALSE)
prop.test( c(unintentional, n - unintentional),
c(terrorism, n - terrorism), conf.level=0.95, correct=FALSE)
# Variables
n <- sum(unlist(x = gunshot_counts, use.names = FALSE))
prop.test( c(unintentional, n - unintentional),
c(terrorism, n - terrorism), conf.level=0.95, correct=FALSE)
c(c(unintentional, n - unintentional),
c(terrorism, n - terrorism))
prop.test(c(c(unintentional, n - unintentional),
c(terrorism, n - terrorism)), conf.level=0.95, correct=FALSE)
c(c(unintentional, n - unintentional),
c(terrorism, n - terrorism))
as.matrix(c(unintentional, n - unintentional),
c(terrorism, n - terrorism))
as.matrix(c(unintentional, n - unintentional, terrorism, n - terrorism))
as.matrix(c(unintentional, n - unintentional, terrorism, n - terrorism), nrow = 2, by.row = TRUE)
as.matrix(c(unintentional, n - unintentional, terrorism, n - terrorism), nrow = 2, by.row = TRUE)
matrix(c(unintentional, n - unintentional, terrorism, n - terrorism), nrow = 2, by.row = TRUE)
matrix(unintentional, n - unintentional, terrorism, n - terrorism, nrow = 2, by.row = TRUE)
matrix(unintentional, n - unintentional, terrorism, n - terrorism, nrow = 2, byrow = TRUE)
matrix(c(unintentional, n - unintentional, terrorism, n - terrorism), nrow = 2, byrow = TRUE)
gunshot_ct <- matrix(c(unintentional, n - unintentional, terrorism, n - terrorism), nrow = 2, byrow = TRUE)
prop.test(x = gunshot_ct, conf.level=0.95, correct=FALSE)
prop.test(
x = gunshot_ct,
conf.level = 0.95,
alternative = 'two-sided',
correct = FALSE
)
prop.test(
x = gunshot_ct,
conf.level = 0.95,
alternative = 'two.sided',
correct = FALSE
)
library(PropCIs)
packages <- c('PropCIs')
lapply(X = packages, FUN = packages.install)
lapply(X = packages, FUN = install.packages)
lapply(X = packages, FUN =  library(PropCIs)
packages <- c('PropCIs')
packages <- c('PropCIs')
lapply(X = packages, FUN = install.packages)
lapply(X = packages, FUN =  library)
lapply(X = packages, FUN =  library)
lapply(X = packages, FUN =  library)
lapply(X = packages, FUN = library, character.only = TRUE)
diffscoreci(
x1 = unintentional,
n1 = n,
x2 = terrorism,
n2 = n
)
diffscoreci(
x1 = unintentional,
n1 = n,
x2 = terrorism,
n2 = n,
conf.level = 0.95
)
# Original count data
gunshot_counts <- list(
assault = 179793,
unintentional =  65502,
suicide = 24624,
undetermined = 17401,
law_enforcement = 5266,
terrorism = 10
)
# Variables
n <- sum(unlist(x = gunshot_counts, use.names = FALSE))
unintentional <- as.integer(x = gunshot_counts['unintentional'])
terrorism <- as.integer(x = gunshot_counts['terrorism'])
gunshot_ct <- as.matrix(x =
)
# Original count data
gunshot_counts <- list(
assault = 179793,
unintentional =  65502,
suicide = 24624,
undetermined = 17401,
law_enforcement = 5266,
terrorism = 10
)
# Variables
n <- sum(unlist(x = gunshot_counts, use.names = FALSE))
unintentional <- as.integer(x = gunshot_counts['unintentional'])
terrorism <- as.integer(x = gunshot_counts['terrorism'])
gunshot_ct <- matrix(c(unintentional, n - unintentional, terrorism, n - terrorism), nrow = 2, byrow = TRUE)
# Difference of proportions tests
prop.test(
x = gunshot_ct,
conf.level = 0.95,
alternative = 'two.sided',
correct = FALSE
)
diffscoreci(
x1 = unintentional,
n1 = n,
x2 = terrorism,
n2 = n,
conf.level = 0.95
)
# Risk score tests
riskscoreci(189, 11034, 104, 11037, conf.level=0.95)
# Risk score tests
riskscoreci(
x1 = unintentional,
n1 = n,
x2 = terrorism,
n2 = n,
conf.level = 0.95
)
gunshot_ct <- as.dataframe(matrix(c(unintentional, n - unintentional, terrorism, n - terrorism), nrow = 2, byrow = TRUE)
print(gunshot_ct)
gunshot_ct <- matrix(c(unintentional, n - unintentional, terrorism, n - terrorism), nrow = 2, byrow = TRUE)
print(gunshot_ct)
65502 / 227094
# Original count data
gunshot_counts <- list(
assault = 179793,
unintentional =  65502,
suicide = 24624,
undetermined = 17401,
law_enforcement = 5266,
terrorism = 10
)
# Variables
n <- sum(unlist(x = gunshot_counts, use.names = FALSE))
unintentional <- as.integer(x = gunshot_counts['unintentional'])
terrorism <- as.integer(x = gunshot_counts['terrorism'])
gunshot_ct <- matrix(c(unintentional, n - unintentional, terrorism, n - terrorism), nrow = 2, byrow = TRUE)
print(gunshot_ct)
# Difference of proportions tests
prop.test(
x = gunshot_ct,
conf.level = 0.95,
alternative = 'two.sided',
correct = FALSE
)
diffscoreci(
x1 = unintentional,
n1 = n,
x2 = terrorism,
n2 = n,
conf.level = 0.95
)
# Risk score tests
riskscoreci(
x1 = unintentional,
n1 = n,
x2 = terrorism,
n2 = n,
conf.level = 0.95
)
# Original count data
gunshot_counts <- list(
assault = 179793,
unintentional =  65502,
suicide = 24624,
undetermined = 17401,
law_enforcement = 5266,
terrorism = 10
)
# Variables
n <- sum(unlist(x = gunshot_counts, use.names = FALSE))
unintentional <- as.integer(x = gunshot_counts['unintentional'])
terrorism <- as.integer(x = gunshot_counts['terrorism'])
gunshot_ct <- matrix(c(unintentional, n - unintentional, terrorism, n - terrorism), nrow = 2, byrow = TRUE)
print(gunshot_ct)
# Difference of proportions tests
cat('\nDifference of proportions using prop.test:\n')
prop.test(
x = gunshot_ct,
conf.level = 0.95,
alternative = 'two.sided',
correct = FALSE
)
cat('\nDifference of proportions using diffscoreci:\n')
diffscoreci(
x1 = unintentional,
n1 = n,
x2 = terrorism,
n2 = n,
conf.level = 0.95
)
# Risk score tests
cat('\nRisk score:\n')
riskscoreci(
x1 = unintentional,
n1 = n,
x2 = terrorism,
n2 = n,
conf.level = 0.95
)
packages <- c('PropCIs', 'epitools')
lapply(X = packages, FUN = install.packages)
lapply(X = packages, FUN = install.packages)
lapply(X = packages, FUN = library, character.only = TRUE)
oddsratio(c(189,10845,104,10933), method="wald", conf=0.95, correct=FALSE)
odds_democrat_liberal <- pi_democrat_liberal / (1 - pi_democrat_liberal)
# Odds ratio manually
pi_democrat_liberal <- 0.89
odds_democrat_liberal <- pi_democrat_liberal / (1 - pi_democrat_liberal)
odds_rep_con <- pi_rep_con / (1 - pi_rep_con)
pi_rep_con <- 0.22
odds_rep_con <- pi_rep_con / (1 - pi_rep_con)
odds_ratio <- odds_democrat_liberal / odds_rep_con
cat('\nOdds ratio manually:\n', odds_ratio)
# Odds ratio with oddsratio function
oddsratio(
x = c(pi_democrat_liberal, 1 - pi_democrat_liberal,
pi_rep_con, 1 - pi_rep_con),
method = 'wald',
conf=0.95,
correct=FALSE
)
# Odds ratio manually
pi_democrat_liberal <- 0.89
odds_democrat_liberal <- pi_democrat_liberal / (1 - pi_democrat_liberal)
pi_rep_con <- 0.22
odds_rep_con <- pi_rep_con / (1 - pi_rep_con)
odds_ratio <- odds_democrat_liberal / odds_rep_con
cat('\nOdds ratio manually:\n', odds_ratio)
# Odds ratio with oddsratio function
oddsratio(
x = c(pi_democrat_liberal, 1 - pi_democrat_liberal,
pi_rep_con, 1 - pi_rep_con),
method = 'wald',
conf=0.95,
correct=FALSE
)
# Odds ratio with oddsratio function
oddsratio(
x = c(pi_democrat_liberal, 1 - pi_democrat_liberal,
pi_rep_con, 1 - pi_rep_con) * 100,
method = 'wald',
conf=0.95,
correct=FALSE
)
# Odds ratio manually
pi_democrat_liberal <- 0.89
odds_democrat_liberal <- pi_democrat_liberal / (1 - pi_democrat_liberal)
pi_rep_con <- 0.22
odds_rep_con <- pi_rep_con / (1 - pi_rep_con)
odds_ratio <- odds_democrat_liberal / odds_rep_con
cat('\nOdds ratio manually:\n', odds_ratio)
# Odds ratio with oddsratio function
oddsratio(
x = c(pi_democrat_liberal, 1 - pi_democrat_liberal,
pi_rep_con, 1 - pi_rep_con) * 100,
method = 'wald',
conf=0.95,
correct=FALSE
)
# Odds ratio manually
pi_democrat_liberal <- 0.89
odds_democrat_liberal <- pi_democrat_liberal / (1 - pi_democrat_liberal)
pi_rep_con <- 0.22
odds_rep_con <- pi_rep_con / (1 - pi_rep_con)
odds_ratio <- odds_democrat_liberal / odds_rep_con
cat('\nOdds ratio manually:\n', odds_ratio)
# Odds ratio with oddsratio function
cat('\nOdds ratio with epitools oddsration function:\n', odds_ratio)
oddsratio(
x = c(pi_democrat_liberal, 1 - pi_democrat_liberal,
pi_rep_con, 1 - pi_rep_con) * 100,
method = 'wald',
conf=0.95,
correct=FALSE
)
# Odds ratio manually
pi_democrat_liberal <- 0.89
odds_democrat_liberal <- pi_democrat_liberal / (1 - pi_democrat_liberal)
pi_rep_con <- 0.22
odds_rep_con <- pi_rep_con / (1 - pi_rep_con)
odds_ratio <- odds_democrat_liberal / odds_rep_con
cat('\nOdds ratio manually:\n', odds_ratio, '\n')
# Odds ratio with oddsratio function
cat('\nOdds ratio with epitools oddsration function:\n')
oddsratio(
x = c(pi_democrat_liberal, 1 - pi_democrat_liberal,
pi_rep_con, 1 - pi_rep_con) * 100,
method = 'wald',
conf=0.95,
correct=FALSE
)
65502/227094
10/292586
ct <- c(pi_democrat_liberal, 1 - pi_democrat_liberal,
pi_rep_con, 1 - pi_rep_con) * 100,
ct <- c(pi_democrat_liberal, 1 - pi_democrat_liberal,
pi_rep_con, 1 - pi_rep_con) * 100
ct
ct <- matrix(
data = c(pi_democrat_liberal, 1 - pi_democrat_liberal,
pi_rep_con, 1 - pi_rep_con) * 100,
nrow = 2,
byrow = TRUE
)
ct
# Odds ratio manually
pi_democrat_liberal <- 0.89
odds_democrat_liberal <- pi_democrat_liberal / (1 - pi_democrat_liberal)
pi_rep_con <- 0.22
odds_rep_con <- pi_rep_con / (1 - pi_rep_con)
odds_ratio <- odds_democrat_liberal / odds_rep_con
ct <- matrix(
data = c(pi_democrat_liberal, 1 - pi_democrat_liberal,
pi_rep_con, 1 - pi_rep_con) * 100,
nrow = 2,
byrow = TRUE
)
cat('\nContinency table:\n')
print(ct)
cat('\nOdds ratio manually:\n', odds_ratio, '\n')
# Odds ratio with oddsratio function
cat('\nOdds ratio with epitools oddsration function:\n')
oddsratio(
x = c(pi_democrat_liberal, 1 - pi_democrat_liberal,
pi_rep_con, 1 - pi_rep_con) * 100,
method = 'wald',
conf=0.95,
correct=FALSE
)
# Odds ratio manually
pi_white_white <- 0.93
odds_white_victim <- pi_white_white / (1 - pi_white_white)
pi_black_black <- 0.92
odds_black_victim <- (1 - pi_black_black) / pi_black_black
odds_ratio <- odds_white_victim / odds_black_victim
ct <- matrix(
data = c(pi_white_white, 1 - pi_black_black,
1 - pi_white_white, pi_black_black) * 100,
nrow = 2,
byrow = TRUE
)
cat('\nContinency table:\n')
print(ct)
# Odds ratio manually
pi_white_white <- 0.93
odds_white_victim <- pi_white_white / (1 - pi_white_white)
pi_black_black <- 0.92
odds_black_victim <- (1 - pi_black_black) / pi_black_black
odds_ratio <- odds_white_victim / odds_black_victim
ct <- matrix(
data = c(pi_white_white, 1 - pi_black_black,
1 - pi_white_white, pi_black_black) * 100,
nrow = 2,
byrow = TRUE
)
cat('\nContinency table:\n')
print(ct)
cat('\nOdds ratio manually:\n', odds_ratio, '\n')
# Odds ratio with oddsratio function
cat('\nOdds ratio with epitools oddsration function:\n')
oddsratio(
x = ct,
method = 'wald',
conf=0.95,
correct=FALSE
)
pchisq(15, df=2, lower.tail=FALSE)
pchisq(q = 73.4, df = 8, lower.tail = FALSE)
rm(list = 'ct')
clear
# Odds ratio manually
pi_democrat_liberal <- 0.89
odds_democrat_liberal <- pi_democrat_liberal / (1 - pi_democrat_liberal)
pi_rep_con <- 0.22
odds_rep_con <- pi_rep_con / (1 - pi_rep_con)
odds_ratio <- odds_democrat_liberal / odds_rep_con
# Contingency table
political_ct <- matrix(
data = c(pi_democrat_liberal, 1 - pi_democrat_liberal,
pi_rep_con, 1 - pi_rep_con) * 100,
nrow = 2,
byrow = TRUE
)
cat('\nContinency table:\n')
print(ct)
# Odds ratio manually
pi_democrat_liberal <- 0.89
odds_democrat_liberal <- pi_democrat_liberal / (1 - pi_democrat_liberal)
pi_rep_con <- 0.22
odds_rep_con <- pi_rep_con / (1 - pi_rep_con)
odds_ratio <- odds_democrat_liberal / odds_rep_con
# Contingency table
political_ct <- matrix(
data = c(pi_democrat_liberal, 1 - pi_democrat_liberal,
pi_rep_con, 1 - pi_rep_con) * 100,
nrow = 2,
byrow = TRUE
)
cat('\nContinency table:\n')
print(political_ct)
cat('\nOdds ratio manually:\n', odds_ratio, '\n')
# Odds ratio with oddsratio function
cat('\nOdds ratio with epitools oddsration function:\n')
oddsratio(
x = c(pi_democrat_liberal, 1 - pi_democrat_liberal,
pi_rep_con, 1 - pi_rep_con) * 100,
method = 'wald',
conf=0.95,
correct=FALSE
)
# Odds ratio manually
pi_democrat_liberal <- 0.89
odds_democrat_liberal <- pi_democrat_liberal / (1 - pi_democrat_liberal)
pi_rep_con <- 0.22
odds_rep_con <- pi_rep_con / (1 - pi_rep_con)
odds_ratio <- odds_democrat_liberal / odds_rep_con
# Contingency table
political_ct <- matrix(
data = c(pi_democrat_liberal, 1 - pi_democrat_liberal,
pi_rep_con, 1 - pi_rep_con) * 100,
nrow = 2,
byrow = TRUE
)
print(political_ct)
cat('\nOdds ratio manually:\n', odds_ratio, '\n')
# Odds ratio with oddsratio function
cat('\nOdds ratio with epitools oddsration function:\n')
oddsratio(
x = c(pi_democrat_liberal, 1 - pi_democrat_liberal,
pi_rep_con, 1 - pi_rep_con) * 100,
method = 'wald',
conf=0.95,
correct=FALSE
)
# Odds ratio manually
pi_white_white <- 0.93
odds_white_victim <- pi_white_white / (1 - pi_white_white)
pi_black_black <- 0.92
odds_black_victim <- (1 - pi_black_black) / pi_black_black
odds_ratio <- odds_white_victim / odds_black_victim
# Contingency table
crime_ct <- matrix(
data = c(pi_white_white, 1 - pi_black_black,
1 - pi_white_white, pi_black_black) * 100,
nrow = 2,
byrow = TRUE
)
print(crime_ct)
cat('\nOdds ratio manually:\n', odds_ratio, '\n')
# Odds ratio with oddsratio function
cat('\nOdds ratio with epitools oddsration function:\n')
oddsratio(
x = ct,
method = 'wald',
conf=0.95,
correct=FALSE
)
# Odds ratio manually
pi_white_white <- 0.93
odds_white_victim <- pi_white_white / (1 - pi_white_white)
pi_black_black <- 0.92
odds_black_victim <- (1 - pi_black_black) / pi_black_black
odds_ratio <- odds_white_victim / odds_black_victim
# Contingency table
crime_ct <- matrix(
data = c(pi_white_white, 1 - pi_black_black,
1 - pi_white_white, pi_black_black) * 100,
nrow = 2,
byrow = TRUE
)
print(crime_ct)
cat('\nOdds ratio manually:\n', odds_ratio, '\n')
# Odds ratio with oddsratio function
cat('\nOdds ratio with epitools oddsration function:\n')
oddsratio(
x = crime_ct,
method = 'wald',
conf=0.95,
correct=FALSE
)
